const core = require('@actions/core');
const run = require('../src/tangle-release');

describe('Tangle Release', () => {
  test('No IOTA_SEED', async () => {
    jest.spyOn(console, 'log').mockImplementation();
    const setFailedMock = jest.spyOn(core, 'setFailed');
    await run();
    expect(setFailedMock).toHaveBeenCalledWith('You must provide the IOTA_SEED env variable');
  });
  test('No IOTA_SEED 2', async () => {
    process.env.IOTA_SEED = 'A'.repeat(81);
    jest.spyOn(console, 'log').mockImplementation();
    const setFailedMock = jest.spyOn(core, 'setFailed');
    await run();
    expect(setFailedMock).toHaveBeenCalledWith('You must provide the IOTA_SEED env variable');
  });
});
